<!DOCTYPE html>
<html>
  <head>
    <title>Практична робота №8: Кілька маркерів</title>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin : 0px; overflow: hidden;">
    <a-scene embedded arjs='detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>

      <a-marker type="barcode" value="0">
        <a-sphere color="red" position="0 0.5 0" radius="0.3"></a-sphere>
      </a-marker>

      <a-marker type="barcode" value="4">
        <a-sphere color="yellow" position="0 0.5 0" radius="0.3"></a-sphere>
      </a-marker>

      <a-marker type="barcode" value="8">
        <a-sphere color="green" position="0 0.5 0" radius="0.3"></a-sphere>
      </a-marker>

      <a-marker type="barcode" value="1">
        <a-sphere id="trigger-sphere" color="blue" radius="0.3" position="0 0.5 0"></a-sphere>
      </a-marker>
    
      <a-marker type="barcode" value="2">
        <a-box id="target-box" color="gray" depth="0.5" height="0.5" width="0.5" position="0 0.25 0"></a-box>
      </a-marker>

      <a-marker type="barcode" value="5">
        <a-box id="info-model" color="teal" depth="0.5" height="0.5" width="0.5" position="0 0.25 0"></a-box>
    
        <a-text id="info-text" value="This is a cube. It is 3D!" position="0 -0.5 0" visible="false" color="black"></a-text>
      </a-marker>

      <a-entity camera>
        <a-cursor></a-cursor>
      </a-entity>
      <script>
        document.addEventListener('DOMContentLoaded', () => {

          const sphere = document.querySelector('#trigger-sphere');
          const box = document.querySelector('#target-box');
          const colors = ['red', 'green', 'blue', 'orange'];
          let currentColor = 0;

          sphere.addEventListener('click', () => {
            const event = new CustomEvent('changecolor');
            window.dispatchEvent(event);
          });

          window.addEventListener('changecolor', () => {
            currentColor = (currentColor + 1) % colors.length;
            box.setAttribute('color', colors[currentColor]);
          });

          const model = document.querySelector('#info-model');
          const text = document.querySelector('#info-text');
          let textVisible = false;

          model.addEventListener('click', () => {
            textVisible = !textVisible;
            text.setAttribute('visible', textVisible);
          });
        });
      </script>
    </a-scene>
  </body>
</html>
